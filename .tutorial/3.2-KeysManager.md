# ⚡️ Generate A Simple Key Manager

As we just saw, LDK will create various hardened child keys from an extended master key - each with a distinct purpose. While LDK provides a `KeysManager` interface that we can use to implement our HD wallet within our Lightning application, let's build a simple key manager to get a better understanding of what LDK is handling for us.

For this exercise, we'll complete the `new_simple_key_manager` function such that it returns a `SimpleKeysManager` structure for us. The ```SimpleKeysManager``` has the following structure:

```rust
SimpleKeysManager {
    node_secret: node_secret,
    node_id: node_id,
    unilateral_close_pubkey: unilateral_close_pubkey,
    coop_close_pubkey: coop_close_pubkey,
    channel_master_key: channel_master_key,
    inbound_payment_key: inbound_payment_key,
    seed: seed,
}
```

To complete this exercise correctly, you'll need to create keys that have the same derrivation paths as the keys in LDK. As a reminder, you can find the derivation paths in the image below. We won't be implementing the keys that are shaded out, such as the channel-specific keys.

<p align="center" style="width: 50%; max-width: 300px;">
  <img src="./tutorial_images/keys/keys_exercise.png" alt="keys_exercise" width="100%" height="auto">
</p>

Additionally, you will need to implement the right type of key (ex: extended private key, private key, public key, extended public key). The correct expected types can be seen in the `SimpleKeysManager` structure definition below.

```rust
pub struct SimpleKeysManager {
    pub node_secret: SecretKey,
    pub node_id: PublicKey,
    pub unilateral_close_pubkey: PublicKey,
    pub coop_close_pubkey: PublicKey,
    pub channel_master_key: Xpriv,
    pub inbound_payment_key: SecretKey,
    pub seed: [u8; 32],
}
```

## ⚡️ Complete Function `new_simple_key_manager` 

Head over to your exercises file and try completing the `new_simple_key_manager` function. This function will take a 32-byte `seed` as an input and return a `SimpleKeysManager` strucure that meets the above requirement types for each component.

```rust
pub fn new_simple_key_manager(seed: [u8; 32]) -> SimpleKeysManager{
}
```

#### To help you with completing this excercise, the following functions are available to you:

```rust
fn get_master_key(seed: [u8; 32]) -> Xpriv {
  // create master key from seed
}
```

```rust
fn get_hardened_child_private_key(master_key: Xpriv, idx: u32) -> SecretKey {
  // create hardened child private key from given master key and index
}
```

```rust
fn get_hardened_extended_child_private_key(master_key: Xpriv, idx: u32) -> Xpriv {
  // create hardened extended child private key from given master key and index
}
```

```rust
fn get_public_key(private_key: SecretKey) -> Secp256k1PublicKey {
  // create public key from private key
}
```

If you would like a hint, click below:
<details>
  <summary>Hint</summary>
  <br/>

Try implementing the following:

```rust
pub fn new_simple_key_manager(seed: [u8; 32]) -> SimpleKeysManager{

    // create master key

    // derive node secret

    // derive node id

    // derive shutdown private key

    // derive shutdown public key

    // derive channel extended private key

    // populate and return SimpleKeysManager
    SimpleKeysManager {
        node_secret: //,
        node_id: //,
        shutdown_pubkey: //,
        channel_master_key: //,
        channel_child_index: //,
        seed: //,
    }
  ```

</details>
